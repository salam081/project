{% extends 'base/base.html' %}
{% load static %}
{% load humanize %}
{% block title %}Dashboard - Admin Panel{% endblock %}

{% block content %}

<style>
.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 17px;
    padding: 15px;
}

.summary-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    padding: 10px;
    height: 100%; /* Ensures cards have equal height */
}

.card-icon {
    font-size: 20px;
    color: #3498db;
    margin-right: 15px;
}

.card-content {
    flex-grow: 1;
}

.card-label {
    font-size: 12px;
    color: #08d1feff;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.card-value {
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

.investment-pool-card {
    background-color: #f7f9fa; /* A slightly different background for visual distinction */
}

.grand-total-card {
    background-color: #2c3e50;
    color: #fff;
}

.grand-total-card .card-icon {
    color: #fff;
}

.grand-total-card .card-value {
    color: #fff;
}

/* Base dashboard styles */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
    margin-top: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    padding: 20px;
}

.stat-icon {
    width: 30px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    color: #fff;
    font-size: 18px;
}

/* Assuming Bootstrap colors for stat icons */
.bg-primary { background-color: #007bff; }
.bg-success { background-color: #28a745; }
.bg-warning { background-color: #ffc107; }
.bg-danger { background-color: #dc3545; }
.bg-info { background-color: #17a2b8; }
.bg-secondary { background-color: #6c757d; }

.content-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
}
</style>

<div id="dashboard" class="content-section active">
    <div class="content-card shadow">
        <h4>Financial Dashboard</h4>
        <p>Complete Overview of Your Financial Portfolio</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card shadow">
            <div class="stat-icon bg-primary">
                <i class="bi bi-people"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_members|default:0|intcomma }}</h3>
                <p>Total Members</p>
            </div>
        </div>
        <div class="stat-card shadow " >
            <div class="stat-icon bg-success">
                <i class="bi bi-bank"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_loans|default:0|intcomma }}</h3>
                <p>Total Loans</p>
            </div>
        </div>
        <div class="stat-card shadow">
            <div class="stat-icon bg-warning">
                <i class="bi bi-exclamation-triangle"></i>
            </div>
            <div class="stat-content">
                <h3>{{ pending_loans|default:0|intcomma }}</h3>
                <p>Pending Loans</p>
            </div>
        </div>
        <div class="stat-card shadow">
            <div class="stat-icon bg-danger">
                <i class="bi bi-x-circle"></i>
            </div>
            <div class="stat-content">
                <h3>{{ rejected_loans|default:0|intcomma }}</h3>
                <p>Rejected Loans</p>
            </div>
        </div>
        <div class="stat-card shadow">
            <div class="stat-icon bg-info">
                <i class="bi bi-box"></i>
            </div>
            <div class="stat-content">
                <h3>{{ total_consumable|default:0|intcomma }}</h3>
                <p>Total Consumables</p>
            </div>
        </div>
        <div class="stat-card shadow">
            <div class="stat-icon bg-secondary">
                <i class="bi bi-clock"></i>
            </div>
            <div class="stat-content">
                <h3>{{ pending_consumable|default:0|intcomma }}</h3>
                <p>Pending Consumables</p>
            </div>
        </div>
    </div>
    
    <div class="content-card">
        <h2>Financial Summary</h2>
        <div class="summary-grid">
            <div class="summary-card shadow">
                <div class="card-icon"><i class="fas fa-piggy-bank"></i></div>
                <div class="card-content">
                    <div class="card-label">Total Savings</div>
                    <div class="card-value">₦{{ total_savings|default:0|floatformat:2|intcomma }}</div>
                </div>
            </div>
            <div class="summary-card shadow">
                <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                <div class="card-content">
                    <div class="card-label">Admin Fee Earned</div>
                    <div class="card-value">₦{{ total_interest|default:0|floatformat:2|intcomma }}</div>
                </div>
            </div>
            <div class="summary-card shadow">
                <div class="card-icon"><i class="fas fa-hand-holding-usd"></i></div>
                <div class="card-content">
                    <div class="card-label">Loanable Amount</div>
                    <div class="card-value">₦{{ total_loanable|default:0|floatformat:2|intcomma }}</div>
                </div>
            </div>
            <div class="summary-card shadow">
                <div class="card-icon"><i class="fas fa-dollar-sign"></i></div>
                <div class="card-content">
                    <div class="card-label">Investment Fund</div>
                    <div class="card-value">₦{{ total_investment|default:0|floatformat:2|intcomma }}</div>
                </div>
            </div>
            <div class="summary-card investment-pool-card shadow">
                <div class="card-icon"><i class="fas fa-coins"></i></div>
                <div class="card-content">
                    <div class="card-label">Investment + Loanable Pool</div>
                    <div class="card-value">₦{{ investment_loanable|default:0|floatformat:2|intcomma }}</div>
                </div>
            </div>
            <div class="summary-card grand-total-card shadow">
                <div class="card-icon"><i class="fas fa-calculator"></i></div>
                <div class="card-content">
                    <a href="{% url 'financial_list' %}">
                    <div class="card-label">GRAND TOTAL</div>
                    <div class="card-value">₦{{ grand_total|default:0|floatformat:2|intcomma }}</div>
                </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}